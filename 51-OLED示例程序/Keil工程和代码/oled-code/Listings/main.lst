C51 COMPILER V9.54   MAIN                                                                  08/17/2022 12:47:12 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          //              @²¼¶¡éÙ³¤  20220715
   2          //              OLEDÏÔÊ¾ºº×Ö£¬×Ö·û£¬×Ö·û´®£¬±äÁ¿£¬Ê±ÖÓ£¬Í¼Æ¬£¬¶¯»­Ð§¹ûÊ¾Àý³ÌÐò
   3          
   4          #include <reg51.h>                                                              //51Í¨ÓÃÍ·ÎÄ¼þ  
   5          #include <oled.h>                                                                       //OLED¿âº¯Êý
   6          
   7          #define uchar unsigned char                             //ÓÃuchar ±íÊ¾ unsigned charÀàÐÍ
   8          #define uint unsigned int                                       //ÓÃuint ±íÊ¾ unsigned intÀàÐÍ
   9          
  10          void Timer0Init(void);                                          //¶¨Ê±Æ÷0³õÊ¼»¯£¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  11          
  12          uint count;                                                                                             //¶¨Ê±Æ÷¼ÆÊ±±äÁ¿£¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  13          uchar hour,min,sec;                                                             //Ê±ÖÓ±äÁ¿Ê±·ÖÃë£¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  14          
  15          extern uchar code BMP0[];                                       //oledfont.hÖÐ£¬Í¼Æ¬0È¡Ä£Êý×é£¬×öÍâ²¿±äÁ¿ÉùÃ÷£¨ÈçÓÃµ½¸ü¶àÍ¼Æ¬£¬¾ùÐèÒªÉùÃ÷£©
  16          extern uchar code BMP1[];                                       //oledfont.hÖÐ£¬Í¼Æ¬0È¡Ä£Êý×é£¬×öÍâ²¿±äÁ¿ÉùÃ÷£¨ÈçÓÃµ½¸ü¶àÍ¼Æ¬£¬¾ùÐèÒªÉùÃ÷£©
  17          void main(void)
  18          {       
  19   1              OLED_Init();                                                                            //³õÊ¼»¯OLED  
  20   1              OLED_Clear();                                                                           //Çå¿ÕÆÁÄ»
  21   1              
  22   1              Timer0Init();                                                                           //¶¨Ê±Æ÷0³õÊ¼»¯ £¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  23   1              hour = 23;                                                                                      //³õÊ¼Ê±¼ä£º23Ê±£¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  24   1              min = 59;                                                                                               //³õÊ¼Ê±¼ä£º59·Ö£¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  25   1              sec = 00;                                                                                               //³õÊ¼Ê±¼ä£º00Ãë£¨½öÑÝÊ¾Ê±ÖÓÐ§¹ûÓÃ£¬·Ç±ØÒª£©
  26   1              while(1) 
  27   1              {       
  28   2      //--------------------------------------------------------------------------------------------------------
             -----------------------
  29   2      //----------------------Ê¾Àý£ºÏÔÊ¾16*16ÏñËØºº×Öº¯Êý-------------------------------------------------------
             -----------------------
  30   2      //------º¯Êý£ºOLED_ShowCHinese(0 ,0,0); 
  31   2      //------µÚÒ»¸öÐÎ²ÎÁÐ×ø±ê£º0£ºµÚ0ÁÐÏñËØ£¨È¡Öµ·¶Î§0¡ª127ÁÐ£©£¬16*16ºº×Ö¿íÎª16ÁÐÏñËØ£¬ÏÂÒ»¸ö×ÖÖÁÉÙ´Ó16ÁÐÏñËØ¿
             -ªÊ¼ 
  32   2      //------µÚ¶þ¸öÐÎ²ÎÐÐ×ø±ê£º0£ºµÚ0Ò³£¨È¡Öµ0-7Ò³£©£¨¿ÉÒÔÀí½âÎª£º¹²8Ò³£¬Ã¿Ò³8ÐÐÏñËØ£¬¹²64ÐÐÏñËØ£¬16*16ºº×ÖÃ¿¸ö
             -×ÖÕ¼2Ò³¹²16ÐÐÏñËØ£©
  33   2      //------µÚÈý¸öÐÎ²Îºº×Ö¿â±àºÅ£º0£ºÏÔÊ¾ÄÄ¸öÖÐÎÄ£¬oledfont.h×Ö¿âÖÐHzk[]¶ÔÓ¦µÄºº×ÖË³Ðò£¬ÀýÈç£º¡®²¼¡¯ÎªHzk[0],È
             -¡Öµ0£¬¡®¶¡¡¯ÎªHzk[1],È¡Öµ1
  34   2      
  35   2                                      OLED_ShowCHinese(0 ,0,0);                               //²¼    ´ÓµÚ0ÁÐ£¨Õ¼ÓÃ0-15£¬¹²16ÁÐ£©¡¢   µÚ0Ò³£¨Õ¼0-1Ò³£º0-16ÐÐÏñËØ£©¡¢Hzk[0]
             -:¡®²¼¡¯
  36   2                                      OLED_ShowCHinese(18,0,1);                               //¶¡  ´ÓµÚ18ÁÐ£¨¿Õ2ÁÐ£¬Õ¼ÓÃ18-33ÁÐ£©¡¢µÚ0Ò³£¨Õ¼0-1Ò³£º0-16ÐÐÏñËØ£©¡¢Hzk[1
             -]:¡®¶¡¡¯
  37   2                                      OLED_ShowCHinese(36,0,2);                               //éÙ    ´ÓµÚ36ÁÐ£¨¿Õ2ÁÐ£¬Õ¼ÓÃ36-51ÁÐ£©¡¢µÚ0Ò³£¨Õ¼0-1Ò³£º0-16ÐÐÏñËØ£©¡¢Hzk[2]
             -:¡®éÙ¡¯
  38   2                                      OLED_ShowCHinese(54,0,3);                               //³¤    ´ÓµÚ54ÁÐ£¨¿Õ2ÁÐ£¬Õ¼ÓÃ54-69ÁÐ£©¡¢µÚ0Ò³£¨Õ¼0-1Ò³£º0-16ÐÐÏñËØ£©¡¢Hzk[3]
             -:¡®³¤¡¯
  39   2      //--------------------------------------------------------------------------------------------------------
             ------------------------
  40   2      
  41   2      //----------------------Ê¾Àý£ºÏÔÊ¾µ¥¸ö×Ö·ûº¯Êý------------------------------------------------------------
             ------------------------
  42   2      //------º¯Êý£ºOLED_ShowChar(71,2,1,8); 
  43   2      //------µÚÒ»¸öÐÎ²ÎÁÐ×ø±ê£º71£ºµÚ71ÁÐÏñËØ£¨È¡Öµ·¶Î§0¡ª127ÁÐ£©¿ªÊ¼ÏÔÊ¾¸Ã×Ö·û
C51 COMPILER V9.54   MAIN                                                                  08/17/2022 12:47:12 PAGE 2   

  44   2      //------µÚ¶þ¸öÐÎ²ÎÐÐ×ø±ê£º2£º µÚ2Ò³£¨È¡Öµ·¶Î§0-7Ò³£¬Ã¿Ò³8ÐÐÏñËØ£©
  45   2      //------µÚÈý¸öÐÎ²Î×Ö·û£º'A'£º×Ö·û¡®A¡¯
  46   2      //------µÚËÄ¸öÐÎ²Î×Ö·û´óÐ¡£º8£º×Ö·ûµãÕó´óÐ¡£¬È¡Öµ8:F6*8[]×Ö·û¼¯£¬×Ö·û´óÐ¡6*8ÏñËØ¡£È¡Öµ16£ºF8*16[]×Ö·û¼¯£¬×
             -Ö·û´óÐ¡8*16ÏñËØ       
  47   2                                      OLED_ShowChar(71,2,'A',8);              //¡®b¡¯ ´ÓµÚ71ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û¡®A¡¯
  48   2                                      OLED_ShowChar(77,2,'b',8);              //¡®&¡¯ ´ÓµÚ77ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û¡®b¡¯
  49   2                                      OLED_ShowChar(83,2,'&',8);              //¡®%¡¯ ´ÓµÚ83ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û¡®&¡¯
  50   2                                      OLED_ShowChar(89,2,'1',8);              //¡®1¡¯ ´ÓµÚ89ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û¡®1¡¯
  51   2                                      
  52   2                                      OLED_ShowChar(95,2,'A',16);             //¡®A¡¯ ´ÓµÚ95ÁÐÏñËØ¡¢ µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª8*16ÏñËØµÄ×Ö·û¡®A
             -¡¯        
  53   2                                      OLED_ShowChar(103,2,'b',16);    //¡®b¡¯ ´ÓµÚ103ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª8*16ÏñËØµÄ×Ö·û¡®b
             -¡¯
  54   2                                      OLED_ShowChar(111,2,'&',16);    //¡®&¡¯ ´ÓµÚ111ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª8*16ÏñËØµÄ×Ö·û¡®&
             -¡¯
  55   2                                      OLED_ShowChar(119,2,'1',16);    //¡®%¡¯ ´ÓµÚ119ÁÐÏñËØ¡¢µÚ2Ò³£¨µÚ16ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª8*16ÏñËØµÄ×Ö·û¡®1
             -¡¯
  56   2      //--------------------------------------------------------------------------------------------------------
             ------------------------
  57   2      
  58   2      //----------------------Ê¾Àý£ºÏÔÊ¾×Ö·û´®º¯Êý--------------------------------------------------------------
             ------------------------
  59   2      //------º¯Êý£ºOLED_ShowString(71,4,"Ab123%&",8);
  60   2      //------µÚÒ»¸öÐÎ²ÎÁÐ×ø±ê£º71£ºµÚ71ÁÐÏñËØ£¨È¡Öµ·¶Î§0¡ª127ÁÐ£©¿ªÊ¼ÏÔÊ¾¸Ã×Ö·û
  61   2      //------µÚ¶þ¸öÐÎ²ÎÐÐ×ø±ê£º4£º µÚ4Ò³£¨È¡Öµ·¶Î§0-7Ò³£¬Ã¿Ò³8ÐÐÏñËØ£©
  62   2      //------µÚÈý¸öÐÎ²Î×Ö·û´®£º"Ab123%&"£º×Ö·û´®£º"Ab123%&"
  63   2      //------µÚËÄ¸öÐÎ²Î×Ö·û´óÐ¡£º8£º×Ö·ûµãÕó´óÐ¡£¬È¡Öµ8:F6*8[]×Ö·û¼¯£¬×Ö·û´óÐ¡6*8ÏñËØ¡£È¡Öµ16£ºF8*16[]×Ö·û¼¯£¬×
             -Ö·û´óÐ¡8*16ÏñËØ       
  64   2                                      OLED_ShowString(71,4,"Ab123%&",8); //´ÓµÚ71ÁÐÏñËØ¡¢µÚ4Ò³£¨µÚ32ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û´®"Ab
             -123%"
  65   2                                      
  66   2                                      OLED_ShowString(71,5,"Ab123%&",16); //´ÓµÚ71ÁÐÏñËØ¡¢µÚ4Ò³£¨µÚ40ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª8*16ÏñËØµÄ×Ö·û´®"
             -Ab123%"
  67   2      //--------------------------------------------------------------------------------------------------------
             ------------------------
  68   2                      
  69   2      //----------------------Ê¾Àý£ºÏÔÊ¾±äÁ¿Öµº¯Êý--------------------------------------------------------------
             ------------------------
  70   2      //------º¯Êý£ºOLED_ShowNum(71,7,sec,2,8);
  71   2      //------µÚÒ»¸öÐÎ²ÎÁÐ×ø±ê£º71£ºµÚ71ÁÐÏñËØ£¨È¡Öµ·¶Î§0¡ª127ÁÐ£©¿ªÊ¼ÏÔÊ¾¸Ã×Ö·û
  72   2      //------µÚ¶þ¸öÐÎ²ÎÐÐ×ø±ê£º7£º µÚ7Ò³£¨È¡Öµ·¶Î§0-7Ò³£¬Ã¿Ò³8ÐÐÏñËØ£©
  73   2      //------µÚÈý¸öÐÎ²Î±äÁ¿£ºsec£ºÊ±ÖÓÃë±äÁ¿
  74   2      //------µÚËÄ¸öÐÎ²Î±äÁ¿³¤¶È£º2£º2Î»
  75   2      //------µÚÎå¸öÐÎ²Î×Ö·û´óÐ¡£º8£º×Ö·ûµãÕó´óÐ¡£¬È¡Öµ8:F6*8[]×Ö·û¼¯£¬×Ö·û´óÐ¡6*8ÏñËØ¡£È¡Öµ16£ºF8*16[]×Ö·û¼¯£¬×
             -Ö·û´óÐ¡8*16ÏñËØ       
  76   2                                      OLED_ShowNum(71,7,sec%10,1,8);  //Ê±ÖÓÃë¸öÎ»£¬´ÓµÚ71ÁÐ£¬µÚ7Ò³£¨56ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û£¬±
             -äÁ¿Î»Êý£º1Î»
  77   2                                      
  78   2                                      OLED_ShowNum(100,7,count,4,8);  //±äÁ¿countÖµ£¬´ÓµÚ100ÁÐ£¬µÚ7Ò³£¨56ÐÐÏñËØ£©¿ªÊ¼ÏÔÊ¾´óÐ¡Îª6*8ÏñËØµÄ×Ö·û£
             -¬±äÁ¿Î»Êý£º4Î»
  79   2      //--------------------------------------------------------------------------------------------------------
             ------------------------
  80   2      
  81   2      //----------------------Ê¾Àý£ºÏÔÊ¾Í¼Æ¬º¯Êý----------------------------------------------------------------
             ------------------------
  82   2      //------º¯Êý£ºOLED_DrawBMP(0,2,64,8,BMP0);
  83   2      //------µÚÒ»¸öÐÎ²ÎÆðÊ¼ÁÐ×ø±ê£º0£ºµÚ0ÁÐÏñËØ£¨È¡Öµ·¶Î§0¡ª127ÁÐ£©¿ªÊ¼
  84   2      //------µÚ¶þ¸öÐÎ²ÎÆðÊ¼ÐÐ×ø±ê£º2£ºµÚ2Ò³£¨È¡Öµ·¶Î§0-7Ò³£¬Ã¿Ò³8ÐÐÏñËØ£©¿ªÊ¼
  85   2      //------µÚÈý¸öÐÎ²Î½áÊøÁÐ×ø±ê£º64£ºµÚ64ÁÐÏñËØ£¨È¡Öµ·¶Î§0¡ª127ÁÐ£©½èËÞ
  86   2      //------µÚËÄ¸öÐÎ²Î½áÊøÐÐ×ø±ê£º7£ºµÚ7Ò³£¨È¡Öµ·¶Î§0-7Ò³£¬Ã¿Ò³8ÐÐÏñËØ£©½áÊø
  87   2      //------µÚÎå¸öÐÎ²ÎÍ¼Æ¬Êý×éÃû£ºBMP0£¬ÐèÒªÔÚÖ÷º¯ÊýÉùÃ÷Íâ²¿±äÁ¿£¬extern uchar code BMP0[];
  88   2                                      OLED_DrawBMP(0,2,64,7,BMP0);    //´ÓµÚ0ÁÐµÚ2Ò³¿ªÊ¼£¬µÚ64ÁÐµÚ7Ò³½áÊø£¬Õâ¸ö·¶Î§ÄÚÏÔÊ¾Í¼Æ¬BMP0£¨Í¼Æ¬×ÖÄ£ÔÚol
C51 COMPILER V9.54   MAIN                                                                  08/17/2022 12:47:12 PAGE 3   

             -edfont.hÖÐ£©
  89   2                                      OLED_DrawBMP(0,2,64,7,BMP1);    //´ÓµÚ0ÁÐµÚ2Ò³¿ªÊ¼£¬µÚ64ÁÐµÚ7Ò³½áÊø£¬Õâ¸ö·¶Î§ÄÚÏÔÊ¾Í¼Æ¬BMP1£¨Í¼Æ¬×ÖÄ£ÔÚol
             -edfont.hÖÐ£©
  90   2      //--------------------------------------------------------------------------------------------------------
             -----------------------
  91   2      
  92   2      //-------------------Ê¾Àý£ºÏÔÊ¾Ê±ÖÓÐ§¹û£¨½ö×öÑÝÊ¾Ð§¹û£¬·Ç±ØÒª£©-------------------------------------------
             -----------------------
  93   2                                      OLED_ShowNum(78,0,hour/10,1,8); //Ð¡Ê±Ê®Î»
  94   2                                      OLED_ShowNum(84,0,hour%10,1,8); //Ð¡Ê±Ê®Î»
  95   2                                      OLED_ShowString(90,0,":",8);            //Ð¡Ê±ºóÃæµÄÃ°ºÅ
  96   2                                      OLED_ShowNum(96,0,min/10,1,8);  //·ÖÖÓÊ®Î»
  97   2                                      OLED_ShowNum(102,0,min%10,1,8); //·ÖÖÓ¸öÎ»
  98   2                                      OLED_ShowString(108,0,":",8);           //·ÖÖÓºóÃæµÄÃ°ºÅ
  99   2                                      OLED_ShowNum(114,0,sec/10,1,8); //ÃëÖÓÊ®Î»              
 100   2                                      OLED_ShowNum(120,0,sec%10,1,8); //ÃëÖÓ¸öÎ»
 101   2      //--------------------------------------------------------------------------------------------------------
             -----------------------
 102   2              }
 103   1      }
 104          
 105          void Timer0Init(void)                                                   //20ºÁÃë@11.0592MHz£¨·Ç±ØÒª£¬½ö×öÑÝÊ¾Ê±ÖÓÓÃ£©
 106          {
 107   1              TMOD |= 0x01;                                                                           //ÉèÖÃ¶¨Ê±Æ÷Ä£Ê½
 108   1              TL0 = 0x00;                                                                                     //ÉèÖÃ¶¨Ê±³õÊ¼Öµ
 109   1              TH0 = 0xB8;                                                                                     //ÉèÖÃ¶¨Ê±³õÊ¼Öµ
 110   1              TR0 = 1;                                                                                                //¶¨Ê±Æ÷0¿ªÊ¼¼ÆÊ±
 111   1              ET0 = 1;                                                                                                //¶¨Ê±Æ÷0ÖÐ¶ÏÊ¹ÄÜ
 112   1              EA = 1;                                                                                                 //×ÜÖÐ¶ÏÊ¹ÄÜ
 113   1      }
 114          
 115          void Tmr0isr () interrupt 1                             //ÑÓÊ±Ê±ÖÓÐ§¹û£¨·Ç±ØÒª£¬½ö×öÑÝÊ¾Ê±ÖÓÓÃ£©
 116          {
 117   1              TL0 = 0x00;                                                                                     //ÉèÖÃ¶¨Ê±³õÊ¼Öµ
 118   1              TH0 = 0xB8;                                                                                     //ÉèÖÃ¶¨Ê±³õÊ¼Öµ 20ºÁÃë@11.0592MHz
 119   1              count++;                                                                                                //¼ÆÊ±£¬Ã¿¸öcount20ºÁÃë
 120   1              if(count >=10000) count = 0;            //·ÀÒç³ö
 121   1              if(count%50==0) sec++;                                  //¼ÆÊ±£¬50¸öcountÎª1Ãë
 122   1              if(sec == 60)                                                                   //60Ãë1·ÖÖÓ
 123   1              {
 124   2                      sec = 0;
 125   2                      min++;
 126   2              }
 127   1              if(min == 60)                                                                           //60·ÖÖÓ1Ð¡Ê±
 128   1              {
 129   2                      min = 0;
 130   2                      hour++;
 131   2              }
 132   1              if(hour == 24)                                                                  //24Ð¡Ê±ÖÆ
 133   1              {
 134   2                      hour = 0;
 135   2              }
 136   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    562    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.54   MAIN                                                                  08/17/2022 12:47:12 PAGE 4   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
